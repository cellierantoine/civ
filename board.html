<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Civ</title>
        <script src="//cdn.jsdelivr.net/phaser/2.2.2/phaser.min.js"></script>
        <style type="text/css">
            body {
                margin: 0;
            }
        </style>
    </head>
    <body>
        <script src="tile.js"></script>
        <script src="event.js"></script>
        <script type="text/javascript">
            var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });


            function preload() {
                game.load.image('background', 'assets/background.png');
                game.load.image('grass', 'assets/grass.png');
                game.load.image('water', 'assets/water.png');
                game.load.image('selector', 'assets/selector.png');
            }

            var selector;
            var ground = [];
            var start;



            function create() {
                //SPRITE
                game.add.sprite(0, 0, 'background');
                mapBeach(ground);

                selector = game.add.sprite(0,0,null);

                document.addEventListener("click", click);

                //start time
                start = game.time.now;
                console.log(game);

            }

            function update() {
                if(game.time.now > start+5000){
                    flood(ground);
                    start = game.time.now;
                }
            }

            function click(event){
                if(event.clientX < 600 && event.clientY > 50){
                    selector.destroy();

                    var x = event.clientX - event.clientX % 25;
                    var y = event.clientY - event.clientY % 25;

                   selector = game.add.sprite(x, y, 'selector');
                }
            }


        </script>

    </body>
</html>